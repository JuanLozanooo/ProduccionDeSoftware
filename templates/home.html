{% extends "base.html" %}

{% block title %}Inicio{% endblock %}

{% block content %}
<div class="container mt-4">

    <h1 class="mb-4 text-center">Bienvenido, {{ usuario.username }}!</h1>
    <p class="text-center fs-5">
        Tu rol es:
        <span class="fw-bold text-primary">
            {% if usuario.rol == 0 %}Administrador{% elif usuario.rol == 1 %}Gratuito{% elif usuario.rol == 2 %}Premium{% endif %}
        </span>
    </p>

    <div class="row g-4 mt-4">

        {# ---------- ADMINISTRADOR ---------- #}
        {% if usuario.rol == 0 %}
        <div class="col-12">
            <h3 class="mb-3 text-secondary">Gestión de Usuarios</h3>
        </div>

        <div class="col-md-4">
            <div class="card shadow-sm h-100" style="border-color: var(--color-cafe-claro);">
                <div class="card-body">
                    <h5 class="card-title">Crear Usuario</h5>
                    <p class="card-text">Añade nuevos usuarios al sistema.</p>
                    <a href="/admin/crear_usuario_form" class="btn btn-primary">Ir</a>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card shadow-sm h-100">
                <div class="card-body">
                    <h5 class="card-title">Consultar Usuario</h5>
                    <p class="card-text">Busca información de usuarios registrados.</p>
                    <a href="/admin/consultar_usuario_form" class="btn btn-primary">Ir</a>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card shadow-sm h-100">
                <div class="card-body">
                    <h5 class="card-title">Actualizar Usuario</h5>
                    <p class="card-text">Modifica datos de usuarios existentes.</p>
                    <a href="/admin/actualizar_usuario_form" class="btn btn-primary">Ir</a>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card shadow-sm h-100">
                <div class="card-body">
                    <h5 class="card-title">Eliminar Usuario</h5>
                    <p class="card-text">Quita usuarios del sistema.</p>
                    <a href="/admin/eliminar_usuario_form" class="btn btn-primary">Ir</a>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card shadow-sm h-100">
                <div class="card-body">
                    <h5 class="card-title">Gestionar Estado</h5>
                    <p class="card-text">Activa, suspende o reactiva cuentas.</p>
                    <a href="/admin/gestionar_estado_usuario_form" class="btn btn-primary">Ir</a>
                </div>
            </div>
        </div>

        <div class="col-12 mt-4">
            <h3 class="mb-3 text-secondary">Gestión de Libros</h3>
        </div>

        <div class="col-md-4">
            <div class="card shadow-sm h-100">
                <div class="card-body">
                    <h5 class="card-title">Crear Libro</h5>
                    <p class="card-text">Añade nuevos libros a la biblioteca.</p>
                    <a href="/admin/crear_libro_form" class="btn btn-primary">Ir</a>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card shadow-sm h-100">
                <div class="card-body">
                    <h5 class="card-title">Consultar Libro</h5>
                    <p class="card-text">Busca libros por título o autor.</p>
                    <a href="/admin/consultar_libro_form" class="btn btn-primary">Ir</a>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card shadow-sm h-100">
                <div class="card-body">
                    <h5 class="card-title">Actualizar Libro</h5>
                    <p class="card-text">Modifica datos de libros existentes.</p>
                    <a href="/admin/actualizar_libro_form" class="btn btn-primary">Ir</a>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card shadow-sm h-100">
                <div class="card-body">
                    <h5 class="card-title">Eliminar Libro</h5>
                    <p class="card-text">Quita libros del catálogo.</p>
                    <a href="/admin/eliminar_libro_form" class="btn btn-primary">Ir</a>
                </div>
            </div>
        </div>
        {% endif %}

        {# ---------- FUNCIONES GENERALES (Rol 0,1,2) ---------- #}
        {% if usuario.rol in [0, 1, 2] %}
        <div class="col-12 mt-5">
            <h3 class="mb-3 text-secondary">Opciones Generales</h3>
        </div>

        <div class="col-md-4">
            <div class="card shadow-sm h-100">
                <div class="card-body">
                    <h5 class="card-title">Buscar Libro</h5>
                    <p class="card-text">Encuentra cualquier libro disponible.</p>
                    <a href="/user/buscar_libro_form" class="btn btn-primary">Ir</a>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card shadow-sm h-100">
                <div class="card-body">
                    <h5 class="card-title">Cambiar Username</h5>
                    <p class="card-text">Actualiza tu nombre de usuario.</p>
                    <a href="/user/cambiar_username_form" class="btn btn-primary">Ir</a>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card shadow-sm h-100">
                <div class="card-body">
                    <h5 class="card-title">Cambiar Contraseña</h5>
                    <p class="card-text">Refuerza la seguridad de tu cuenta.</p>
                    <a href="/user/cambiar_contrasena_form" class="btn btn-primary">Ir</a>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card shadow-sm h-100">
                <div class="card-body">
                    <h5 class="card-title">Subir Review</h5>
                    <p class="card-text">Comparte tu opinión sobre un libro.</p>
                    <a href="/review/subir_review_form" class="btn btn-primary">Ir</a>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card shadow-sm h-100">
                <div class="card-body">
                    <h5 class="card-title">Estado de Suscripción</h5>
                    <p class="card-text">Consulta tu plan actual.</p>
                    <a href="/suscripcion/ver_estado_suscripcion_form" class="btn btn-primary">Ir</a>
                </div>
            </div>
        </div>
        {% endif %}

        {# ---------- GRATUITO ---------- #}
        {% if usuario.rol == 1 %}
        <div class="col-12 mt-5">
            <h3 class="mb-3 text-secondary">Funciones de Usuario Gratuito</h3>
        </div>

        <div class="col-md-4">
            <div class="card shadow-sm h-100">
                <div class="card-body">
                    <h5 class="card-title">Leer Fragmento</h5>
                    <p class="card-text">Accede a un fragmento gratuito.</p>
                    <a href="/gratuito/leer_fragmento_libro_form" class="btn btn-primary">Ir</a>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card shadow-sm h-100">
                <div class="card-body">
                    <h5 class="card-title">Pasar a Premium</h5>
                    <p class="card-text">Desbloquea libros completos.</p>
                    <a href="/gratuito/pasar_a_premium_form" class="btn btn-primary">Ir</a>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card shadow-sm h-100">
                <div class="card-body">
                    <h5 class="card-title">Activar Premium</h5>
                    <p class="card-text">Inicia tu suscripción.</p>
                    <a href="/suscripcion/activar_suscripcion_premium_form" class="btn btn-primary">Ir</a>
                </div>
            </div>
        </div>
        {% endif %}

        {# ---------- PREMIUM ---------- #}
        {% if usuario.rol == 2 %}
        <div class="col-12 mt-5">
            <h3 class="mb-3 text-secondary">Funciones de Usuario Premium</h3>
        </div>

        <div class="col-md-4">
            <div class="card shadow-sm h-100">
                <div class="card-body">
                    <h5 class="card-title">Leer Libro Completo</h5>
                    <p class="card-text">Accede al contenido completo.</p>
                    <a href="/premium/leer_libro_completo_form" class="btn btn-primary">Ir</a>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card shadow-sm h-100">
                <div class="card-body">
                    <h5 class="card-title">Cancelar Suscripción</h5>
                    <p class="card-text">Administra tu plan premium.</p>
                    <a href="/premium/cancelar_suscripcion_form" class="btn btn-primary">Ir</a>
                </div>
            </div>
        </div>
        {% endif %}

    </div>
</div>
{% endblock %}
